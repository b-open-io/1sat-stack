# 1sat-stack configuration

# Network: "main" or "test"
network: main

# Logging configuration
logging:
  # Default log level for all components (debug, info, warn, error)
  level: info

# JungleBus client configuration
junglebus:
  url: https://junglebus.gorillapool.io
  # token: ""       # Optional API token
  # ssl: true       # Use SSL (default: true)
  # version: v1     # API version (default: v1)
  # debug: false    # Enable debug logging

# HTTP Server settings
server:
  port: 8080
  host: 0.0.0.0
  base_path: /api

# TXO storage - BadgerDB (default)
store:
  mode: embedded
  provider: badger
  badger:
    path: ~/.1sat/store
    log_level: error  # Quiet BadgerDB internal logs (debug, info, warn, error)
    # in_memory: false

# PubSub for events
pubsub:
  mode: embedded
  provider: channels  # channels (in-memory), or redis for distributed
  channels:
    buffer_size: 100
  routes:
    enabled: true

# BEEF storage chain: LRU cache -> badger -> JungleBus fallback
beef:
  mode: embedded
  chain:
    - provider: lru
      lru:
        size: 100mb
    - provider: badger
      badger:
        path: ~/.1sat/beef
    - provider: junglebus
  routes:
    enabled: true

# TXO indexed output storage
txo:
  mode: embedded
  routes:
    enabled: true

# Indexer service
indexer:
  mode: embedded
  tag: IngestTag
  concurrency: 1
  verbose: false
  indexers:
    - p2pkh
    - lock
    - inscription
    - ordlock
  routes:
    enabled: true

# P2P client configuration
p2p:
  mode: embedded
  storage_path: ~/.1sat

# Chaintracks configuration
chaintracks:
  mode: embedded
  storage_path: ~/.1sat/chaintracks
  bootstrap_url: https://mainnet.gorillanode.io/api/v1

# Arcade configuration (transaction broadcasting)
arcade:
  mode: embedded
  storage_path: ~/.1sat/arcade
  database:
    type: sqlite
    sqlite_path: ~/.1sat/arcade/arcade.db
  events:
    type: memory
    buffer_size: 1000

# Merkle service (proof management)
merkle:
  mode: embedded
  routes:
    enabled: true

# BSV21 token support (optional)
bsv21:
  mode: embedded
  sync:
    enabled: false
    dispatch_workers: 8
    token_workers: 16
    fee_per_output: 1000
    lifecycle_interval: 5m  # How often to check token balances and manage workers (default: 5m)
    log_level: debug  # Highlight BSV21 sync1 (debug, info, warn, error)
  routes:
    enabled: true

# Overlay services
overlay:
  mode: embedded
  topic_whitelist:
    - tm_1sat
    - tm_bsv21
  # topic_blacklist: []  # Topics to disable even if whitelisted
  routes:
    enabled: true

# Owner sync services
owner:
  mode: embedded
  log_level: debug  # Per-module log level (debug, info, warn, error)
  routes:
    enabled: true

# ORDFS content serving (optional)
ordfs:
  enabled: true
  redis:
    addr: localhost:6380
  routes:
    enabled: true

# JungleBus Sync subscriptions
jbsync:
  subscribers:
    - subscription_id: "51ce778bfa6c7c5fd3f3b6fbaf96ebde1348198c33ca26cb1a8fadbfee0212d7"
      queue_name: "bsv21"
      from_block: 783968  # BSV21 genesis block
      batch_size: 1000
      reorg_depth: 6
      enable_mempool: true
      autostart: false
